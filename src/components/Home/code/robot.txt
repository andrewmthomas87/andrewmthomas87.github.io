<pre class='code'><span class='p'>public void</span> <span class='b'>calculate</span><span class='lb'>(<span class='p'>int</span> <span class='b'>resolution</span>) {</span><br />    <span class='lb'>assert</span> resolution <span class='p'>&gt;=</span> <span class='o'>1</span><span class='lb'>;</span><br />    <span class='r'>this</span><span class='lb'>.</span>points <span class='p'>=</span> <span class='lb'>new <span class='p'>Point</span>[</span>resolution <span class='p'>+</span> <span class='o'>1</span><span class='lb'>];</span><br /><br />    <span class='p'>double</span> deltaDistance <span class='p'>=</span> <span class='r'>this</span><span class='lb'>.</span>distance <span class='p'>/</span> resolution<span class='lb'>;</span><br />    <span class='p'>double</span> velocity <span class='p'>=</span> <span class='r'>this</span><span class='lb'>.</span>startVelocity<span class='lb'>;</span><br />    <span class='r'>this</span><span class='lb'>.</span>points<span class='lb'>[<span class='o'>0</span>] <span class='p'>=</span> new <span class='b'>Point</span>(<span class='o'>0.0</span>, <span class='b'>velocity</span>);</span><br />    <span class='lb'>for (</span><span class='p'>int</span> i <span class='p'>=</span> <span class='o'>1</span><span class='lb'>;</span> i <span class='p'>&lt;</span> resolution <span class='p'>+</span> <span class='o'>1</span><span class='lb'>;</span> i<span class='p'>++</span><span class='lb'>) {</span><br />        <span class='p'>double</span> distance <span class='p'>=</span> deltaDistance <span class='p'>*</span> i<span class='lb'>;</span><br />        <span class='p'>double</span> maxAchievableVelocity <span class='p'>=</span> Math<span class='lb'>.<span class='b'>sqrt</span>(</span>Math<span class='lb'>.<span class='b'>pow</span>(</span>velocity<span class='lb'>, <span class='o'>2</span>)</span> <span class='p'>+ <span class='o'>2</span> *</span> <span class='r'>this</span><span class='lb'>.</span>acceleration <span class='p'>*</span> deltaDistance<span class='lb'>);</span>    <span class='d'>// vf^2 = vi^2 + 2ad</span><br />        velocity <span class='p'>=</span> Math<span class='lb'>.<span class='b'>min</span>(</span>maxAchievableVelocity<span class='lb'>, <span class='r'>this</span>.</span>maxVelocity<span class='lb'>);</span><br /><br />        <span class='r'>this</span><span class='lb'>.</span>points<span class='lb'>[</span>i<span class='lb'>] <span class='p'>=</span> new <span class='b'>Point</span>(<span class='b'>distance</span>, <span class='b'>velocity</span>);</span><br />    <span class='lb'>}</span><br /><br />    velocity <span class='p'>=</span> <span class='r'>this</span><span class='lb'>.</span>endVelocity<span class='lb'>;</span><br />    <span class='r'>this</span><span class='lb'>.</span>points<span class='lb'>[</span>resolution<span class='lb'>].</span>velocity <span class='p'>=</span> velocity<span class='lb'>;</span><br />    <span class='lb'>for (</span><span class='p'>int</span> i <span class='p'>=</span> resolution <span class='p'>-</span> <span class='o'>1</span><span class='lb'>;</span> i <span class='p'>&gt;</span> <span class='o'>0</span><span class='lb'>;</span> i<span class='p'>--</span><span class='lb'>) {</span><br />        <span class='p'>double</span> maxAchievableVelocity <span class='p'>=</span> Math<span class='lb'>.<span class='b'>sqrt</span>(</span>Math<span class='lb'>.<span class='b'>pow</span>(</span>velocity<span class='lb'>, <span class='o'>2</span>) <span class='p'>+ <span class='o'>2</span> *</span> <span class='r'>this</span>.</span>deceleration <span class='p'>*</span> deltaDistance<span class='lb'>);</span><br /></pre>
